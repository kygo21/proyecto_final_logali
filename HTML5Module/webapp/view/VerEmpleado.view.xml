<mvc:View controllerName="jimmy.HTML5Module.controller.VerEmpleado" 
            xmlns:mvc="sap.ui.core.mvc" 
            displayBlock="true" 
            xmlns="sap.m"
            xmlns:form="sap.ui.layout.form"
            xmlns:core="sap.ui.core"
            xmlns:suite="sap.suite.ui.commons">
    <SplitApp id="splitAppEmpleado">
        <masterPages>
            <Page showHeader="false">
                <Toolbar  class="sapUiTinyMarginTop">
                    <Button icon="sap-icon://nav-back" press="onPressBack"/>
                    <SearchField liveChange="onSearchEmpleado" width="100%"/>
                </Toolbar>
                <List itemPress="onSeleccionarEmpleado" items="{ path: 'oDataModel>/Users', 
                                                                 filters: [
                                                                            {path: 'SapId', operator: 'EQ', value1: 'jim.moreno21@gmail.com'}
                                                                        ]
                                                                }">
                    <items>
                        <StandardListItem title="{oDataModel>FirstName} {oDataModel>LastName}" description="{oDataModel>Dni}" type="Active"/>
                    </items>
                </List>
            </Page>
        </masterPages>
        <detailPages>
            <Page id="detalleSelectEmpleado" showHeader="false">
                <FlexBox alignItems="Center" justifyContent="Center" height="100%">
                    <Text text="{i18n>seleccioneEmpleado}"/>
                </FlexBox>
            </Page>
            <Page id="detalleEmpleado" title="{i18n>detalleEmpleado}">
                <ObjectHeader icon="{= ${oDataModel>Type}==='0' ? 'sap-icon://employee-pane' : ${oDataModel>Type}==='1' ? 'sap-icon://employee' : 'sap-icon://leads' }"
                                title="{oDataModel>FirstName} {oDataModel>LastName}"
                                intro="{oDataModel>Dni}"
                                class="sapUiResponsivePadding--header" responsive="true">
                    <ObjectAttribute title="{i18n>fechaIncorporacion}" text="{ path: 'oDataModel>CreationDate', type:'sap.ui.model.type.Date'}"/>
                    <ObjectAttribute title="{i18n>tipo}" text="{= ${oDataModel>Type}==='0' ? ${i18n>interno} : ${oDataModel>Type}==='1' ? ${i18n>autonomo} : ${i18n>gerente}}"/>
                    <ObjectAttribute title="{i18n>comentario}" text="{oDataModel>Comments}"/>
                </ObjectHeader>
                <IconTabBar class="sapUiResponsiveContentPadding">
                    <items>
                        <IconTabFilter design="Horizontal" icon="sap-icon://attachment" text="{i18n>ficheros}">
                            <UploadCollection id="UploadCollection" maximumFilenameLength="55" maximumFileSize="10" multiple="true" sameFilenameAllowed="true"
                                                instantUpload="true" uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments" items="{oDataModel>UserToAttachment}"
                                                change="onChange" uploadComplete="onUploadComplete" beforeUploadStarts="onBeforeUploadStart"
                                                fileDeleted="onFileDeleted"
                                                noDataDescription="{i18n>Arrastrarficheros}">
                                <items>
                                    <UploadCollectionItem documentId="{oDataModel>AttId}" visibleEdit="false" fileName="{oDataModel>DocName}" press="downloadFile"/>
                                </items>
                            </UploadCollection>
                        </IconTabFilter>
                        <IconTabFilter icon="sap-icon://money-bills" design="Horizontal" text="{i18n>historial}">
                            <suite:Timeline enableDoubleSided="true" groupByType="Year" groupBy="CreationDate" showHeaderBar="false" enableScroll="false"
								            height="100%" sortOldestFirst="true" content="{oDataModel>UserToSalary}">
                                <suite:content>
                                    <suite:TimelineItem userName="{ parts:[
                                                                            {path:'oDataModel>Ammount'},
                                                                            {path:'odataModel>Waers'}
                                                                        ],
												                    type: 'sap.ui.model.type.Currency',
												                    formatOptions: {showMeasure: false}
                                                                }"
										                icon="sap-icon://circle-task"
										                text="{oDataModel>Comments}"
										                dateTime="{oDataModel>CreationDate}">                                    
                                    </suite:TimelineItem>
                                </suite:content>
                            </suite:Timeline>
                        </IconTabFilter>
                    </items>
                </IconTabBar>
				<footer>
					<Toolbar>
						<ToolbarSpacer></ToolbarSpacer>
						<Button text="{i18n>darDeBaja}" press="onDarBajaEmpleado" type="Reject"/>
						<Button text="{i18n>ascender}" press="onAscenderEmpleado" type="Accept"/>
					</Toolbar>
				</footer>
            </Page>
        </detailPages>
    </SplitApp>
</mvc:View>